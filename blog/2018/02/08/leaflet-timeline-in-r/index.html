<!doctype html><html lang=en dir=ltr><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Leaflet timeline in R | Boaz Sobrado's Website</title><meta name=generator content="Hugo Eureka 0.9.3"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@sobradob"><meta name=twitter:title content="Leaflet timeline in R"><meta name=twitter:description content="How to make a timeline of GPS measurements."><meta name=twitter:image content="https://boazsobrado.com/images/icon.png"><link rel=stylesheet href=https://boazsobrado.com/css/eureka.min.8bf128b7c068bcfa664364bfa39a7a19d2693d733fbb7b78d4f332072d509559e8dac42125b67f575872fa5e171062f9.css><script defer src=https://boazsobrado.com/js/eureka.min.fa9a6bf6d7a50bb635b4cca7d2ba5cf3dfb095ae3798773f1328f7950028b48c17d06276594e1b5f244a25a6c969a705.js></script><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload href="https://fonts.googleapis.com/css2?family=Lora:wght@400;600;700&amp;family=Noto+Serif+SC:wght@400;600;700&amp;display=swap" as=style onload='this.onload=null,this.rel="stylesheet"'><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.4.0/build/styles/base16/solarized-light.min.css media=print onload='this.media="all",this.onload=null' crossorigin><script defer src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.4.0/build/highlight.min.js crossorigin></script><script defer src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.4.0/build/languages/dart.min.js crossorigin></script><link rel=stylesheet href=https://boazsobrado.com/css/highlightjs.min.709a3935ce97d114067069bbfb3ee69272ab42ecadee52ff9444fb7c24dd4bc739c7a9d15d65dd2e11889ffaf3f79945.css media=print onload='this.media="all",this.onload=null'><script defer type=text/javascript src=https://boazsobrado.com/js/fontawesome.min.e836a89a8bbf60d321aa70171762507305210add9bef5ac4fdcc57d5a1e53683dae503bb50f22ce9baca05b086762e4d.js></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css integrity=sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ media=print onload='this.media="all",this.onload=null' crossorigin><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js integrity=sha384-VQ8d8WVFw0yHhCk5E8I86oOhv48xLpnDZx5T9GogA/Y84DcCKWXDmSDfn13bzFZY crossorigin></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]})})</script><script defer src=https://cdn.jsdelivr.net/npm/mermaid@8.14.0/dist/mermaid.min.js integrity=sha384-atOyb0FxAgN9LyAc6PEf9BjgwLISyansgdH8/VXQH8p2o5vfrRgmGIJ2Sg22L0A0 crossorigin></script><link rel=icon type=image/png sizes=32x32 href=https://boazsobrado.com/images/icon_hu_1bdb764068156ee8.png><link rel=apple-touch-icon sizes=180x180 href=https://boazsobrado.com/images/icon_hu_4ac171fe39152d22.png><meta name=description content="How to make a timeline of GPS measurements."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Blog","item":"https://boazsobrado.com/blog/"},{"@type":"ListItem","position":2,"name":"Leaflet timeline in R","item":"https://boazsobrado.com/blog/2018/02/08/leaflet-timeline-in-r/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://boazsobrado.com/blog/2018/02/08/leaflet-timeline-in-r/"},"headline":"Leaflet timeline in R | Boaz Sobrado\u0027s Website","datePublished":"2018-02-08T15:52:58+02:00","dateModified":"2018-02-08T15:52:58+02:00","wordCount":290,"publisher":{"@type":"Person","name":"Boaz Sobrado","logo":{"@type":"ImageObject","url":"https://boazsobrado.com/images/icon.png"}},"description":"How to make a timeline of GPS measurements."}</script><meta property="og:title" content="Leaflet timeline in R | Boaz Sobrado's Website"><meta property="og:type" content="article"><meta property="og:image" content="https://boazsobrado.com/images/icon.png"><meta property="og:url" content="https://boazsobrado.com/blog/2018/02/08/leaflet-timeline-in-r/"><meta property="og:description" content="How to make a timeline of GPS measurements."><meta property="og:locale" content="en"><meta property="og:site_name" content="Boaz Sobrado's Website"><meta property="article:published_time" content="2018-02-08T15:52:58+02:00"><meta property="article:modified_time" content="2018-02-08T15:52:58+02:00"><meta property="article:section" content="blog"><meta property="article:tag" content="R"><meta property="og:see_also" content="https://boazsobrado.com/blog/2019/08/12/automating-my-business/"><meta property="og:see_also" content="https://boazsobrado.com/blog/2019/01/13/where-i-was-in-2018/"><meta property="og:see_also" content="https://boazsobrado.com/blog/2018/08/11/cubas-short-term-property-rental-market-2017-2018/"><meta property="og:see_also" content="https://boazsobrado.com/blog/2018/08/11/how-to-generate-a-bitcoin-vanity-address-using-a-mac/"><meta property="og:see_also" content="https://boazsobrado.com/blog/2017/12/17/time-series-analysis-for-facebook-message-volume/"><meta property="og:see_also" content="https://boazsobrado.com/blog/2017/12/01/time-series-analysis-for-facebook-message-volume/"><meta property="og:see_also" content="https://boazsobrado.com/blog/2017/08/29/implementing-a-kalman-filter-in-r-for-android-gps-measurements/"><meta property="og:see_also" content="https://boazsobrado.com/blog/2017/08/18/costa-rican-saints/"><meta property="og:see_also" content="https://boazsobrado.com/blog/2016/11/13/you-are-wasting-your-time-with-spreadsheets/"><meta property="og:see_also" content="https://boazsobrado.com/blog/2016/10/29/how-to-get-your-facebook-messages-into-r/"><meta property="og:see_also" content="https://boazsobrado.com/blog/2016/04/20/how-i-made-this-website-tutorial/"><meta property="og:see_also" content="https://boazsobrado.com/blog/2015/11/05/using-google-maps-api-mol-bubi-competition/"><meta property="og:see_also" content="https://boazsobrado.com/blog/2015/10/20/do-stupid-people-make-more-spelling-mistakes-an-analysis-with-r./"><meta property="og:see_also" content="https://boazsobrado.com/blog/2017/12/01/time-series-analysis-for-facebook-message-volume/"><meta property="og:see_also" content="https://boazsobrado.com/blog/2017/08/29/implementing-a-kalman-filter-in-r-for-android-gps-measurements/"><meta property="og:see_also" content="https://boazsobrado.com/blog/2017/05/22/bayesian-images/"><body class="flex min-h-screen flex-col"><header class="min-h-16 pl-scrollbar bg-secondary-bg fixed z-50 flex w-full items-center shadow-sm"><div class="mx-auto w-full max-w-screen-xl"><script>let storageColorScheme=localStorage.getItem("lightDarkMode");((storageColorScheme=="Auto"||storageColorScheme==null)&&window.matchMedia("(prefers-color-scheme: dark)").matches||storageColorScheme=="Dark")&&document.getElementsByTagName("html")[0].classList.add("dark")</script><nav class="flex items-center justify-between flex-wrap px-4 py-4 md:py-0"><a href=/ class="me-6 text-primary-text text-xl font-bold">Boaz Sobrado's Website</a>
<button id=navbar-btn class="md:hidden flex items-center px-3 py-2" aria-label="Open Navbar">
<i class="fas fa-bars"></i></button><div id=target class="hidden block md:flex md:grow md:justify-between md:items-center w-full md:w-auto text-primary-text z-20"><div class="md:flex md:h-16 text-sm md:grow pb-4 md:pb-0 border-b md:border-b-0"><a href=/#about class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 border-transparent me-4">About</a>
<a href=/blog/ class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 selected-menu-item me-4">Blog</a>
<a href=/series/media class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 border-transparent me-4">Media</a>
<a href=/boaz_sobrado_cv.pdf class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 border-transparent me-4">CV</a>
<a href=/contact/ class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 border-transparent me-4">Contact Me</a></div><div class=flex><div class="relative pt-4 md:pt-0"><div class="cursor-pointer hover:text-eureka" id=lightDarkMode><i class="fas fa-adjust"></i></div><div class="fixed hidden inset-0 opacity-0 h-full w-full cursor-default z-30" id=is-open></div><div class="absolute flex flex-col start-0 md:start-auto end-auto md:end-0 hidden bg-secondary-bg w-48 rounded py-2 border border-tertiary-bg cursor-pointer z-40" id=lightDarkOptions><span class="px-4 py-1 hover:text-eureka" name=Light>Light</span>
<span class="px-4 py-1 hover:text-eureka" name=Dark>Dark</span>
<span class="px-4 py-1 hover:text-eureka" name=Auto>Auto</span></div></div></div></div><div class="fixed hidden inset-0 opacity-0 h-full w-full cursor-default z-0" id=is-open-mobile></div></nav><script>let element=document.getElementById("lightDarkMode");storageColorScheme==null||storageColorScheme=="Auto"?document.addEventListener("DOMContentLoaded",()=>{window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",switchDarkMode)}):storageColorScheme=="Light"?(element.firstElementChild.classList.remove("fa-adjust"),element.firstElementChild.setAttribute("data-icon","sun"),element.firstElementChild.classList.add("fa-sun")):storageColorScheme=="Dark"&&(element.firstElementChild.classList.remove("fa-adjust"),element.firstElementChild.setAttribute("data-icon","moon"),element.firstElementChild.classList.add("fa-moon")),document.addEventListener("DOMContentLoaded",()=>{getcolorscheme(),switchBurger()})</script></div></header><main class="grow pt-16"><div class=pl-scrollbar><div class="mx-auto w-full max-w-screen-xl lg:px-4 xl:px-8"><div class="grid grid-cols-2 gap-4 lg:grid-cols-8 lg:pt-12"><div class="bg-secondary-bg col-span-2 rounded px-6 py-8 lg:col-span-6"><article class=prose><h1 class=mb-4>Leaflet timeline in R</h1><div class="text-tertiary-text not-prose mt-2 flex flex-row flex-wrap items-center"><div class="me-6 my-2"><i class="fas fa-calendar me-1"></i>
<span>2018-02-08</span></div><div class="me-6 my-2"><i class="fas fa-clock me-1"></i>
<span>2 min read</span></div><div class="me-6 my-2"><i class="fas fa-folder me-1"></i>
<a href=https://boazsobrado.com/categories/r/ class=hover:text-eureka>R</a>
<span>, </span><a href=https://boazsobrado.com/categories/gps/ class=hover:text-eureka>GPS</a>
<span>, </span><a href=https://boazsobrado.com/categories/android/ class=hover:text-eureka>Android</a></div><div class="me-6 my-2"><i class="fas fa-th-list me-1"></i>
<a href=https://boazsobrado.com/series/hacking/ class=hover:text-eureka>Hacking</a>
<span>, </span><a href=https://boazsobrado.com/series/statistics/ class=hover:text-eureka>Statistics</a></div></div><p><a href=https://rstudio.github.io/leaflet/>Leaflet</a> is a powerful tool for visualasing spatial data in R. However, after much googling I could not find an easy way to create a timeline to visualise changes in time. Therefore, I decided to create a simple shiny app that does it.</p><h2 id=raw-android-gps-movements>Raw Android GPS Movements</h2><h3 id=code>Code</h3><p>The code below takes raw location measurements from my Android phone visualises them over time. The size of the circle is the confidence interval of the measurement. Before you go and try to find me at those spots, I no longer live there!</p><pre><code class=language-{app}># this is a shiny web app. Save as app.r

library(shiny)
library(leaflet)
library(dplyr)

# Define UI for application that draws a map
data&lt;- readRDS(&quot;f.rds&quot;) # loading the data. It has the timestamp, lon, lat, and the accuracy (size of circles)

ui &lt;- bootstrapPage(
  tags$style(type = &quot;text/css&quot;, &quot;html, body {width:100%;height:100%}&quot;),
  leafletOutput(&quot;mapAct&quot;, width = &quot;100%&quot;, height = &quot;100%&quot;),
  absolutePanel(top = 10, right = 10,
  sliderInput(&quot;animation&quot;, &quot;Time:&quot;,
              min = as.POSIXct(&quot;2017-02-15 00:00:00&quot;,tz = &quot;Europe/Budapest&quot;),
              max = as.POSIXct(&quot;2017-02-15 23:59:59&quot;,tz = &quot;Europe/Budapest&quot;),
              value = as.POSIXct(&quot;2017-02-15 00:00:00&quot;,tz = &quot;Europe/Budapest&quot;),
              timezone = &quot;+0200&quot;,
              animate =
                animationOptions(interval = 600, loop = TRUE))
  )

  )


# Define server logic required
server &lt;- function(input, output) {
  #stuff in server
  filteredData &lt;- reactive({
    #add rollified thing
    from&lt;- input$animation-90
    till&lt;- input$animation+90
    data %&gt;% filter(time &gt;= from &amp; time &lt;=  till)
  })

  output$mapAct&lt;-renderLeaflet({
    leaflet() %&gt;%
      addTiles() %&gt;%
      addProviderTiles(providers$CartoDB.Positron)%&gt;%
      fitBounds(lng1 = 5,lat1 = 52,lng2 = 5.2,lat2 = 52.2)# set to reactive minimums
  })

  observe({
    leafletProxy(&quot;mapAct&quot;, data = filteredData()) %&gt;%
      clearShapes() %&gt;%
      addCircles(lng = ~lon, lat = ~lat,
                 radius = ~accuracy, fillOpacity = 0.02,color = &quot;#DF2935&quot;)
  })

}

# Run the application
shinyApp(ui = ui, server = server)

</code></pre><h3 id=app>App</h3><p>And this is what the application looks like ( I only start moving around 10 am):</p><iframe src=https://sobrado.shinyapps.io/showcase/ style=border:none;width:650px;height:900px></iframe></article><div class=my-4><a href=https://boazsobrado.com/tags/r/ class="inline-block bg-tertiary-bg text-sm rounded px-3 py-1 my-1 me-2 hover:text-eureka">#R</a></div><div class="-mx-2 mt-4 flex flex-col border-t px-2 pt-4 md:flex-row md:justify-between"><div><span class="text-primary-text block font-bold">Previous</span>
<a href=https://boazsobrado.com/blog/2018/07/21/my-time-in-utrecht/ class=block>My time in Utrecht</a></div><div class="mt-4 md:mt-0 md:text-right"><span class="text-primary-text block font-bold">Next</span>
<a href=https://boazsobrado.com/blog/2017/12/17/time-series-analysis-for-facebook-message-volume/ class=block>Time Series analysis for Facebook message volume</a></div></div></div><div class=col-span-2><div class="bg-secondary-bg prose max-w-none rounded p-6"><h3>Series of Posts</h3><a href=https://boazsobrado.com/blog/2019/08/12/automating-my-business/ class=no-underline>Automating my business</a><br><a href=https://boazsobrado.com/blog/2019/01/13/where-i-was-in-2018/ class=no-underline>Where I was in 2018</a><br><a href=https://boazsobrado.com/blog/2018/08/11/cubas-short-term-property-rental-market-2017-2018/ class=no-underline>Cuba’s short term property rental market 2017-2018</a><br><a href=https://boazsobrado.com/blog/2018/08/11/how-to-generate-a-bitcoin-vanity-address-using-a-mac/ class=no-underline>How to generate a Bitcoin vanity address using a Mac</a><br><a href=https://boazsobrado.com/blog/2018/02/08/leaflet-timeline-in-r/ class=no-underline>Leaflet timeline in R</a><br><a href=https://boazsobrado.com/blog/2017/12/17/time-series-analysis-for-facebook-message-volume/ class=no-underline>Time Series analysis for Facebook message volume</a><br><a href=https://boazsobrado.com/blog/2017/12/01/time-series-analysis-for-facebook-message-volume/ class=no-underline>Time Series analysis for Facebook message volume</a><br><a href=https://boazsobrado.com/blog/2017/08/29/implementing-a-kalman-filter-in-r-for-android-gps-measurements/ class=no-underline>Implementing a Kalman filter in R for Android GPS measurements</a><br><a href=https://boazsobrado.com/blog/2017/08/18/costa-rican-saints/ class=no-underline>Costa Rican Saints</a><br><a href=https://boazsobrado.com/blog/2016/11/13/you-are-wasting-your-time-with-spreadsheets/ class=no-underline>You are wasting your time with spreadsheets</a><br><a href=https://boazsobrado.com/blog/2016/10/29/how-to-get-your-facebook-messages-into-r/ class=no-underline>How to get your Facebook messages into R</a><br><a href=https://boazsobrado.com/blog/2016/04/20/how-i-made-this-website-tutorial/ class=no-underline>How I made this website - tutorial</a><br><a href=https://boazsobrado.com/blog/2015/11/05/using-google-maps-api-mol-bubi-competition/ class=no-underline>Using Google Maps API: Mol Bubi Competition</a><br><a href=https://boazsobrado.com/blog/2015/10/20/do-stupid-people-make-more-spelling-mistakes-an-analysis-with-r./ class=no-underline>Do stupid people make more spelling mistakes? An analysis with R.</a><br><a href=https://boazsobrado.com/blog/2018/02/08/leaflet-timeline-in-r/ class=no-underline>Leaflet timeline in R</a><br><a href=https://boazsobrado.com/blog/2017/12/01/time-series-analysis-for-facebook-message-volume/ class=no-underline>Time Series analysis for Facebook message volume</a><br><a href=https://boazsobrado.com/blog/2017/08/29/implementing-a-kalman-filter-in-r-for-android-gps-measurements/ class=no-underline>Implementing a Kalman filter in R for Android GPS measurements</a><br><a href=https://boazsobrado.com/blog/2017/05/22/bayesian-images/ class=no-underline>Bayesian Images</a><br></div></div><div class="bg-secondary-bg prose col-span-2 rounded p-6 lg:col-span-6"><h3>See Also</h3><a href=https://boazsobrado.com/blog/2017/12/17/time-series-analysis-for-facebook-message-volume/ class=no-underline>Time Series analysis for Facebook message volume</a><br><a href=https://boazsobrado.com/blog/2017/12/01/time-series-analysis-for-facebook-message-volume/ class=no-underline>Time Series analysis for Facebook message volume</a><br><a href=https://boazsobrado.com/blog/2017/08/18/costa-rican-saints/ class=no-underline>Costa Rican Saints</a><br><a href=https://boazsobrado.com/blog/2017/05/22/bayesian-images/ class=no-underline>Bayesian Images</a><br><a href=https://boazsobrado.com/blog/2016/11/13/you-are-wasting-your-time-with-spreadsheets/ class=no-underline>You are wasting your time with spreadsheets</a><br><a href=https://boazsobrado.com/blog/2016/10/29/how-to-get-your-facebook-messages-into-r/ class=no-underline>How to get your Facebook messages into R</a><br></div></div><script>document.addEventListener("DOMContentLoaded",()=>{hljs.highlightAll()})</script></div></div></main><footer class=pl-scrollbar><div class="mx-auto w-full max-w-screen-xl"><div class="text-center p-6 pin-b"><p class="text-sm text-tertiary-text">&copy; 2024 <a href=https://www.boazsobrado.com/>Boaz Sobrado</a>
&#183; Powered by the <a href=https://github.com/wangchucheng/hugo-eureka class=hover:text-eureka>Eureka</a> theme for <a href=https://gohugo.io class=hover:text-eureka>Hugo</a></p></div></div></footer></body></html>